<!DOCTYPE html>
<html>
<head>
    <title>Rust Stuttgart #0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="/_lib/css/style.css" />
</head>
<body>
<textarea id="source">

class: center, middle, title-slide, rust-logo-black

# Rust Stuttgart #0

## Herzlich willkommen!

---

# Agenda

1. Überblick
1. Tooling
1. Sicherheit
1. Borrowing & Ownership
1. Lifetimes
1. Resourcen & Tipps

TODO

---

class: title-slide, green

# Überblick

1. Warum Rust?
1. Einsatzgebiete
1. Etwas zur Geschichte
1. Hello World!
1. Basic Building Blocks
1. Play time!

---

class: rust-logo-black

# Rust: Ein Überblick

* Multiparadigmen (funktional, imperativ)
* Unterstützt Nebenläufigkeit (concurrency), generische Programmierung
* Typisierung: stark, statisch, Typinferenz
* Pattern matching, Traits, Closures, RAII, Zero-Cost-Abstractions
* Self-hosted compiler (LLVM backend)
* Erste stabile Version: 2015
* Aktuelle Version: 1.31.1 (2018-12-20)
* Gestartet von Graydon Hoare (Mozilla Research)
* Entwicklung gesponsert von Mozilla

<img alt="Ferris" width="256" src="/0-introduction-and-planning/img/ferris.svg" />

*[Ferris](http://rustacean.net/), das (inoffizielle) Rust-Maskottchen*

???

* [Source](https://en.wikipedia.org/wiki/Rust_(programming_language)
* [RAII](https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)

---

# Warum Rust?

## Performance

* Keine Runtime ([minimaler Initialisierungscode](https://github.com/rust-lang/rust/blob/master/src/libstd/rt.rs))
* Keine Laufzeit-Garbage-Collection
* Zero-Cost-Abstractions

## Verlässlichkeit

* Ownership model & Typsystem
* Speichersicherheit
* Threadsicherheit

## Produktivität

* Gute Dokumentation
* Compiler-Usability (z.B. Fehlermeldungen)
* Ausgereiftes Tooling (z.B. package manager Cargo)

???

Source: [rust-lang.org](https://www.rust-lang.org/)

---

## Einsatzgebiete

* Systemprogrammierung (z.B. [Redox OS](https://redox-os.org/))
* Embedded (s. [Rust Embedded WG](https://github.com/rust-embedded/wg))
* Web (an allen Fronten)
  * Server-seitig (z.B. [Rocket](http://rocket.rs/))
  * Client-seitig via [WebAssembly](https://webassembly.org/)
  * Browser-Engine ([Servo](https://servo.org/))
* Cloud (z.B. Cloudflare & Dropbox)
* CLI Tools (z.B. [Zola Static Site Generator](https://www.getzola.org/))
* Spiele (und -Engines, z.B. Chucklefish Games)
* Machine Learning (http://www.arewelearningyet.com)
* Blockchain tech (z.B. [Parity Tech](https://www.parity.io/))
* ... etc.

## Are we there yet?

* http://arewegameyet.com
* http://arewewebyet.org/
* http://arewelearningyet.com/
* http://areweideyet.com/
---

# Etwas zur Geschichte

TODO

---

# Hello World!

## [play.rust-lang.org](https://play.rust-lang.org)

```rust
//! main.rs

fn main() {
    println!("Hello World");
}
```

---

# Rust lernen

<div style="position: relative; margin-bottom: 390px">
    <img width="512" style="margin-top: -300px; position:absolute; clip: rect(300px,512px,1000px,0px);"
         src="/0-introduction-and-planning/img/new_users_vs_borrowck_meme.jpg"/>
</div>

*New users vs `borrowck`*

???

* [Image source](https://www.reddit.com/r/rustjerk/comments/a6nbi0/art_new_users_vs_borrowck/)

---

class: split-40

# Rust lernen

.row[
.column[

Schwierige Konzepte ([Rust 2018 Survey](https://blog.rust-lang.org/2018/11/27/Rust-survey-2018.html)):

* Ownership & Borrowing
* Lifetimes
* Macros

Verbesserungen in diesen Bereichen

* Verbessertes Macro-System
* NLL (Non-lexical lifetimes)

]
.column[

<img width="512px" src="/0-introduction-and-planning/img/How_difficult_are_Rust_concepts.png" />

]
]

Tipps für hilfreiche Ressourcen gibt es am Ende der Präsentation.

???

* [Image source](https://blog.rust-lang.org/2018/11/27/Rust-survey-2018.html)

---

# Basic Building Blocks

## Variables

```rust
let x = 1;
let y: usize = 2;
let mut z = 3;
z += 1;
println!("{}", z);
```

--

## Tuples

```rust
let t = ("tuple", 42, 3.14, true);
let (_, _, pi, _) = t;
let meaning_of_life = t.1;
assert_eq!(meaning_of_life, 42);
```

---

## Control Flow

### Sequence

```rust
foo;
return bar;  // explicit return
baz          // implicit return
```

### Choice

```rust
if x == 42 { /* ... */ }
```

```rust
match food { /* ... */ }
```

### Loops

```rust
for i in 0..100 { /* ... */ }
```

```rust
while x > 0 { /* ... */ }
loop { /* ... */ }         // ≙ while true
```

---

## Structs

```rust
struct Ferris {
    is_happy: bool,
    color: String,
    loc: u64,
}
```

--

## Enums

```rust
enum Vehicle {
    Boat,
    Spaceship,
}

enum Color {
    RGB(u8, u8, u8),
    HSV { h: u16, s: u8, v: u8 }
}
```

---

## Functions

```rust
fn factorial(i: u32) -> u32 {
    let mut n = 1;
    for num in 2..=i {
        n *= num;
    }
    n
}
```

--

## Traits

```rust
trait SayHello {
    fn greet(&self, other: &str) -> String;
}
```

--

```rust
impl SayHello for Ferris {
    fn greet(&self, other: &str) -> String {
        let my_mood = if self.is_happy { "happy :)" } else { "unhappy :(" };
        format!("Hey {}, I'm feeling {}", other, my_mood)
    }
}
```

```rust
ferris.greet("fellow Rustaceans");  // => Hey fellow Rustaceans, I'm feeling happy :)
```

---

# Play time!

## [play.rust-lang.org](https://play.rust-lang.org)

```rust
impl Ferris {
    fn from_loc(text: &str) -> Self {
        // TODO
    }
}

fn main() {
    let text = r#"fn factorial(i: u32) -> u32 {
        let mut n = 1;
        for num in 2..=i {
            n *= num;
        }
        n
    }


    // Ignore empty lines!"#;

    let ferris = Ferris::from_loc(text);
    assert_eq!(8, ferris.loc);
}
```

---

# Play time!

## Tipps

* [`std::string::String`](https://doc.rust-lang.org/std/string/struct.String.html)
* [Casting - Rust by Example](https://doc.rust-lang.org/rust-by-example/types/cast.html)
* [`std::iter::Iterator`](https://doc.rust-lang.org/std/iter/trait.Iterator.html) (optional)

---

# Eine mögliche Lösung

## CW: Spoiler!

--

```rust
impl Ferris {
    fn from_loc(text: &str) -> Self {
        let loc = text
            .lines()
            .filter(|line| !line.is_empty())
            .count();
        Self {
            is_happy: true,
            color: "orange".to_owned(),
            loc: loc as u64,
        }
    }
}
```

---

class: title-slide, green

# Tooling

* Cargo
* Rustdoc
* Clippy

---

<img width="95%" src="/0-introduction-and-planning/img/rustc_giant_crab_meme.jpg"/>

???

* [Source](https://www.reddit.com/r/rustjerk/comments/8huafo/better_get_it_right_on_the_first_try/)

---

## Cargo

* [crates.io](https://crates.io)

TODO

---

## Rustdoc

TODO

---

## Clippy

TODO

---

class: title-slide, pink

# Sicherheit

* Sicherheitsgarantien
* Safe and `unsafe` Rust

---

# Sicherheitsgarantien

* Speichersicherheit
  * Keine invaliden Speicherzugriffe (z.B. Buffer Overflows, Dangling pointers, fehlerhafte Pointer-Arithmetik)
  * Keine uninitialisierten Variablen (z.B. null pointer dereference)
  * Ohne Laufzeit-Garbage-Collection

* Thread-Sicherheit: Keine Data Races
* Data Race != Race Condition

* Was ist ein Data Race?
  * Mindestens zwei Threads greifen auf denselben Speicher zu
  * Mindestens ein Schreibzugriff
  * Mindestens ein Zugriff ist nicht synchronisiert (keine Reihenfolge der Zugriffe garantiert)

* Was ist eine Race Condition?
  * Die Ausgabe eines Programms hängt von der Sequenz oder Timing anderer Ereignisse ab
  * z.B. Deadlock (z.B. zwei Programme warten jeweils auf die Freigabe einer Ressource, die aktuell vom anderen Programm
    blockiert wird)

???

* [Memory Safety - Wikipedia](https://en.wikipedia.org/wiki/Memory_safety)
* [Dead lock - Wikipedia](https://en.wikipedia.org/wiki/Deadlock)
* [Races - Nomicon](https://doc.rust-lang.org/nomicon/races.html)
* [Safety guarantees - Rust doc](https://doc.rust-lang.org/1.0.0/style/safety/README.html)

---

# Sicherheitsgarantien (cont'd)

* API-Garantien
  * Beispiel: `std::str` garantiert, dass der zugrundeliegende Buffer valies UTF-8 ist

## Was nicht garantiert ist

* Programmabstürze, z.B. via `panic!()` oder `Option::unwrap()`
* Race Conditions
* Deadlocks
* Memory leaks
* Nicht aufgerufene Desktruktoren
* Integer Overflows
* Fehlerhafte Programmlogik

???

* [Nomicon - What unsafe does](https://doc.rust-lang.org/nomicon/what-unsafe-does.html)

---

# Safe and unsafe Rust

<img width="300" src="/0-introduction-and-planning/img/unsafe_meme.jpg" />

`unsafe` erlaubt:

* Rohe Pointer dereferenzieren
* `unsafe`-Methode oder -Funktion aufrufen
* auf `mut`able statische Variable zugreifen oder schreiben
* `unsafe` trait implementieren

???

* [Unsafe meme](https://github.com/rochacbruno/rust_memes)

---

class: title-slide, blue

# Borrowing & Ownership

TODO

---

class: title-slide, green

# Lifetimes

TODO

---

# Resourcen & Tipps

* [Learn Rust](https://www.rust-lang.org/learn)
  * ["The Book"](https://doc.rust-lang.org/book/)
  * [Rust by Example](https://doc.rust-lang.org/stable/rust-by-example/)
* [Rust Playground](https://play.rust-lang.org/)
* [New Rustacean Podcast](https://newrustacean.com/)
* [This Week In Rust](https://this-week-in-rust.org/)

---
</textarea>
<script src="../_lib/js/remark.js" type="text/javascript">
</script>
<script type="text/javascript">
    let slideshow = remark.create({ratio: "16:9"});
</script>
</body>
</html>
